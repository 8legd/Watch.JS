var WatchJS={noMore:false,isFunction:function(a){var b={};return a&&b.toString.call(a)=="[object Function]"},isInt:function(a){var b=parseInt(a);if(isNaN(b))return false;return a==b&&a.toString()==b.toString()},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},defineGetAndSet:function(a,b,c,d){try{Object.defineProperty(a,b,{get:c,set:d,enumerable:true,configurable:true})}catch(e){try{Object.prototype.__defineGetter__.call(a,b,c);Object.prototype.__defineSetter__.call(a,b,d)}catch(f){throw"watchJS error: browser not supported :/"}}},defineProp:function(a,b,c){try{Object.defineProperty(a,b,{enumerable:false,configurable:true,writable:false,value:c})}catch(d){a[b]=c}}};WatchJS.defineProp(Object.prototype,"watch",function(){if(arguments.length==1)this.watchAll.apply(this,arguments);else if(WatchJS.isArray(arguments[0]))this.watchMany.apply(this,arguments);else this.watchOne.apply(this,arguments)});WatchJS.defineProp(Object.prototype,"watchAll",function(a){var b=this;if(b instanceof String||!(b instanceof Object)&&!WatchJS.isArray(b))return;var c=[];if(WatchJS.isArray(b)){for(var d=0;d<b.length;d++){c.push(d)}}else{for(var e in b){c.push(e)}}b.watchMany(c,a)});WatchJS.defineProp(Object.prototype,"watchMany",function(a,b){var c=this;if(WatchJS.isArray(c)){for(var d in a){c.watchOne(a[d],b)}}else{for(var e in a){c.watchOne(a[e],b)}}});WatchJS.defineProp(Object.prototype,"watchOne",function(a,b){var c=this;var d=c[a];if(c[a]===undefined||WatchJS.isFunction(c[a]))return;if(c[a]!=null)c[a].watchAll(b);c.watchFunctions(a);if(!c.watchers){WatchJS.defineProp(c,"watchers",{})}if(!c.watchers[a])c.watchers[a]=[];c.watchers[a].push(b);var e=function(){return d};var f=function(e){var f=d;d=e;if(c[a])c[a].watchAll(b);c.watchFunctions(a);if(JSON.stringify(f)!=JSON.stringify(e)){if(!WatchJS.noMore){c.callWatchers(a);WatchJS.noMore=false}}};WatchJS.defineGetAndSet(c,a,e,f)});WatchJS.defineProp(Object.prototype,"callWatchers",function(a){var b=this;for(var c in b.watchers[a]){if(WatchJS.isInt(c)){b.watchers[a][c]()}}});WatchJS.defineProp(Object.prototype,"watchFunctions",function(a){var b=this;if(!b[a]||b[a]instanceof String||!WatchJS.isArray(b[a]))return;var c=b[a].pop;WatchJS.defineProp(b[a],"pop",function(){var d=c.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return d});var d=b[a].push;WatchJS.defineProp(b[a],"push",function(){var c=d.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return c});var e=b[a].reverse;WatchJS.defineProp(b[a],"reverse",function(){var c=e.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return c});var f=b[a].shift;WatchJS.defineProp(b[a],"shift",function(){var c=f.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return c});var g=b[a].sort;WatchJS.defineProp(b[a],"sort",function(){var c=g.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return c});var h=b[a].slice;WatchJS.defineProp(b[a],"slice",function(){var c=h.apply(this,arguments);b.watchOne(b[a]);return c});var i=b[a].unshift;WatchJS.defineProp(b[a],"unshift",function(){var c=i.apply(this,arguments);b.watchOne(b[a]);b.callWatchers(a);return c})})